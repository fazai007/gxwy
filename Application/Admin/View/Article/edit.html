<extend name="Public:base" />
<block name="style">
    <style>
        .layui-form-label{width:100px}
        .layui-input-block{margin-left:130px}
    </style>
</block>
<block name="body">
    <div class="layui-tab layui-tab-brief">
        <ul class="layui-tab-title">
            <li><a href="{:U('Admin/Article/index')}">文章管理</a></li>
            <li><a href="{:U('Admin/Article/add')}">添加文章</a></li>
            <li class="layui-this">编辑文章</li>
        </ul>
        <div class="layui-tab-content">
            <div class="layui-tab-item layui-show">
                <form class="layui-form form-container" action="{:U('Admin/Article/edit')}" method="post">
                    <div class="layui-form-item">
                        <label class="layui-form-label">文章标题</label>
                        <div class="layui-input-block">
                            <input type="text" name="title" value="{$article.title}" required lay-verify="required" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">文章短标题</label>
                        <div class="layui-input-block">
                            <input type="text" name="short_title" value="{$article.short_title}" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">文章标签</label>
                        <div class="layui-input-block">
                            <input type="text" name="tag" value="{$article.tag}" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">缩略图</label>
                        <div class="layui-input-block">
                            <input type="text" name="thumb" id="thumb" value="{$article.thumb}" placeholder="请上传缩略图" class="layui-input layui-input-inline">
                            <button type="button" id="upload-thumb" data-input-id="thumb" class="layui-btn layui-btn-normal">上传图片</button>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">文章作者</label>
                        <div class="layui-input-block">
                            <input type="text" name="author" value="{$article.author}" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">文章来源</label>
                        <div class="layui-input-block">
                            <input type="text" name="source" value="{$article.source}" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">文章来源链接</label>
                        <div class="layui-input-block">
                            <input type="text" name="source_url" value="{$article.source_url}" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">文章分类</label>
                        <div class="layui-input-block">
                            <select name="cate_id" lay-verify="required">
                                <option value="">请选择文章分类</option>
                                <?php
                                foreach($article_cate_level_list as $v){
                                    echo '<option value="' . $v['id'] . '"';
                                    if($article['cate_id'] == $v['id']){
                                        echo 'selected';
                                    }
                                    echo '>';
                                    if($v['level'] != 1){
                                        echo '|';
                                        for($i=1; $i < $v['level']; $i++){
                                            echo ' ----';
                                        }
                                    }
                                    echo $v['name'] . '</option>';
                                }
                                ?>
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">关键字</label>
                        <div class="layui-input-block">
                            <input type="text" name="keywords" value="{$article.keywords}" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">描述</label>
                        <div class="layui-input-block">
                            <textarea name="description" class="layui-textarea">{$article.description}</textarea>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">详情</label>
                        <div class="layui-input-block">
                            <textarea name="content" id="content" class="layui-textarea">{$article.content}</textarea>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">排序</label>
                        <div class="layui-input-inline">
                            <input type="number" name="sort" value="{$article.sort}" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">点击量</label>
                        <div class="layui-input-inline">
                            <input type="number" name="click_count" value="{$article.click_count}" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">评论数</label>
                        <div class="layui-input-inline">
                            <input type="number" name="comment_count" value="{$article.comment_count}" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">分享数</label>
                        <div class="layui-input-inline">
                            <input type="number" name="share_count" value="{$article.share_count}" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <input type="hidden" name="id" value="{$article.id}">
                            <button class="layui-btn" lay-submit lay-filter="*">保存</button>
                            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</block>
<block name="js">
    <script src="__PUBLIC__/plugins/kindeditor/kindeditor.config.js"></script>
    <script src="__PUBLIC__/plugins/kindeditor/kindeditor-all-min.js"></script>
</block>
<block name="script">
    <script>
        var uploadIds = new Array('upload-thumb');
        $(function () {
            var _kindEditor;
            KindEditor.ready(function (K) {
                _kindEditor = K.create('#content', KindEditorOptions);
            });
        });
    </script>
</block>